# 3. 子系统设计

【要求】
## 3.1 子系统划分方案

根据高内聚、低耦合的原则，学校教务管理系统被划分为以下 6 个子系统：


1. **用户子系统 (UserSubsystem)**：负责用户身份验证、权限分配、个人信息维护及账号管理。
2. **用户子系统 (UserSubsystem)**：负责用户身份验证、权限分配、个人信息维护及账号管理。
3. **选课管理子系统 (EnrollmentSubsystem)**：核心业务子系统，处理课程查询、选课校验、名额竞争、退课及候补队列管理。
4. **课程管理子系统 (CourseSubsystem)**：负责课程基础信息的发布、更新及开课计划的调整。
5. **成绩管理子系统 (GradeSubsystem)**：处理成绩的录入、修改、审核、排名及统计分析。
6. **集成接口子系统 (IntegrationSubsystem)**：封装与外部课程数据库的通信逻辑，确保数据的双向同步。
7. **基础设施子系统 (FoundationSubsystem)**：提供通用的数据库连接、安全加固、日志记录及系统配置服务。

## 3.2 子系统的类映射

每个子系统包含的类映射如下表所示：

| 子系统名 | 包含的类 (分析类) |
| :--- | :--- |
| **用户子系统** | `LoginForm`, `MainDashboard`, `LoginController`, `Account`, `UserSession`, `PersonalInfoPage`, `ProfileController`, `User`, `Student`, `Teacher`, `UserManagementUI`, `UserOpsController` |
| **选课管理子系统** | `CourseQueryUI`, `CourseSearchController`, `EnrollmentUI`, `EnrollmentController`, `EnrollmentRecord`, `WaitingList`, `DropCourseController`, `DropRequest`, `ApprovalUI` |
| **课程管理子系统** | `CourseManagementUI`, `CourseInfoController`, `Course` |
| **成绩管理子系统** | `GradeEntryUI`, `GradeController`, `GradeRecord`, `GradeAuditUI`, `AuditController` |
| **集成接口子系统** | `ExternalDBInterface` (Interface/Proxy) |
| **基础设施子系统** | `DBConnection`, `SecurityProvider`, `Logger` |

## 3.3 子系统之间的依赖关系

子系统间的层次结构和依赖方向如下包图所示：


![子系统依赖关系](Subsystem_Dependencies.puml)

### 依赖关系说明
- **业务依赖**：`EnrollmentSubsystem` 和 `GradeSubsystem` 均依赖于 `CourseSubsystem`（用于获取课程实体）和 `UserSubsystem`（用于获取用户身份）。
- **系统集成**：`CourseSubsystem` 依赖于 `IntegrationSubsystem` 进行外部数据的拉取与推送。
- **通用支持**：所有业务子系统均直接或间接依赖于 `FoundationSubsystem` 提供的基础设施服务。

